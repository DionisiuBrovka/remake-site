var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es8","es3");
var WEP={panel:"#_wep",hookTag:"html",toggle:".wep_toggle",isOn:!1,isPanelVisible:!0,options:{font_size:{label:"\u0428\u0440\u0438\u0444\u0442",values:{small:"-1",initial:"0",large:"+1",huge:"+2"}},color_theme:{label:"\u0422\u0435\u043c\u0430",values:{1:"\u0427\u0451\u0440\u043d\u044b\u043c \u043f\u043e \u0431\u0435\u043b\u043e\u043c\u0443",2:"\u0411\u0435\u043b\u044b\u043c \u043f\u043e \u0447\u0451\u0440\u043d\u043e\u043c\u0443",3:"\u0422\u0451\u043c\u043d\u043e-\u0441\u0438\u043d\u0438\u043c \u043f\u043e \u0433\u043e\u043b\u0443\u0431\u043e\u043c\u0443",
4:"\u041a\u043e\u0440\u0438\u0447\u043d\u0435\u0432\u044b\u043c \u043f\u043e \u0431\u0435\u0436\u0435\u0432\u043e\u043c\u0443"}},font_family:{label:"\u0428\u0440\u0438\u0444\u0442",values:{initial:"\u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0439",sans:"Sans",serif:"Serif",monospace:"Monospace"}},font_spacing:{label:"\u041c\u0435\u0436\u0431\u0443\u043a\u0432\u0435\u043d\u043d\u043e\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435",values:{initial:"\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435",
large:"\u0411\u043e\u043b\u044c\u0448\u043e\u0435",huge:"\u041e\u0433\u0440\u043e\u043c\u043d\u043e\u0435"}},images:{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",values:{initial:"\u0412\u041a\u041b",black_n_white:"\u0427/\u0411",off:"\u0412\u042b\u041a\u041b"}}},settings:{color_theme:1,font_family:null,font_size:"large",font_spacing:"initial",images:"initial"},panelBarOptions:["font_size","color_theme"],panelBodyOptions:["font_family","font_spacing","images"],cssTemplate:null,
init:function(a){void 0!==a&&(a.hasOwnProperty("applyPanelCss")&&(this.applyPanelCss=a.applyPanelCss),a.hasOwnProperty("cssTemplate")&&(this.cssTemplate=a.cssTemplate),a.panel&&(this.panel=a.panel),a.hookTag&&(this.hookTag=a.hookTag),a.toggle&&(this.toggle=a.toggle),a.options&&(this.options=a.options),a.panelBarOptions&&(this.panelBarOptions=a.panelBarOptions),a.panelBodyOptions&&(this.panelBodyOptions=a.panelBodyOptions),this.cssTemplate&&this.loadCssTemplate(this.cssTemplate),this.start(),this._isInitialized=
!0,console.info("WEP: user-initialized"))},start:function(){var a=this;if(!0===a._isInitialized)return!1;a.hasOwnProperty("applyPanelCss")&&1!=a.applyPanelCss?(document.getElementById("_we_panel_css")&&document.getElementsByTagName("head")[0].removeChild(document.getElementById("_we_panel_css")),console.log("WEP: own style switched off")):a.injectPanelCss();jQuery(document).ready(function(){a.panel instanceof jQuery||(a.panel=jQuery(a.panel),0==a.panel.length&&(jQuery("body").append('<div id="'+a.panel.selector.substring(1)+
'"></div>'),a.panel=jQuery("body").find(a.panel.selector)));a.hookTag instanceof jQuery||(a.hookTag=jQuery(a.hookTag));a.toggle instanceof jQuery||(a.toggle=jQuery(a.toggle));var b="";if("undefined"!==typeof a.panelBodyOptions&&a.panelBodyOptions&&0<a.panelBodyOptions.length)a.panelBodyOptions.forEach(function(c){a.options.hasOwnProperty(c)&&(b+=createOptionItemHtml(c,a.options[c]))});else for(var c in a.options)b+=createOptionItemHtml(c,a.options[c]);var d="";"undefined"!==typeof a.panelBarOptions&&
a.panelBarOptions&&0<a.panelBarOptions.length&&a.panelBarOptions.forEach(function(b){a.options.hasOwnProperty(b)&&(d+=createOptionItemHtml(b,a.options[b]))});a.panel.html('\n\t\t\t<div class="wrapper">\n\t\t\t\t\n\t\t\t\t<div class="panel_bar">\n\t\t\t\t\t<div class="inner">\n\t\t\t\t\t\t<div class="options">'+d+'</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="buttons">\n\t\t\t\t\t\t\t<button type="button" id="_we_switch" title="\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u0440\u0435\u0436\u0438\u043c\u0430 \u0434\u043b\u044f \u0441\u043b\u0430\u0431\u043e\u0432\u0438\u0434\u044f\u0449\u0438\u0445">\n\t\t\t\t\t\t\t\t<i class="icon icon-eye-slash"></i>\n\t\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<button type="button" id="_we_settings_toggle" title="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a">\n\t\t\t\t\t\t\t\t<span>\u0415\u0449\u0451</span>\n\t\t\t\t\t\t\t\t<i class="icon icon-three-bars"></i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\n\t\t\t\t\n\t\t\t\t<div class="panel_body">\n\t\t\t\t\t<div class="inner">\n\t\t\t\t\t\t<div class="options">'+
b+'</div>\n\t\t\t\t\t\t<button type="button" id="_we_visibility_toggle" title="\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c/\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c \u0434\u043b\u044f \u0441\u043b\u0430\u0431\u043e\u0432\u0438\u0434\u044f\u0449\u0438\u0445">\n\t\t\t\t\t\t\t<i class="icon icon-eye"></i>\n\t\t\t\t\t\t\t<span>\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t');
a.settingsToggle=a.panel.find("#_we_settings_toggle");a.showPanelToggle=a.panel.find("#_we_visibility_toggle");a.switchToggle=a.panel.find("#_we_switch");a.loadSettings();a.applySettings();a.toggle.off().click(function(){a.isEnabled()?a.switchOff():a.switchOn()});a.showPanelToggle.off().click(function(){a.isPanelVisible?a.hidePanel():a.showPanel()});a.settingsToggle.off().click(function(){a.panel.toggleClass("opened")});a.switchToggle.off().click(function(){a.isEnabled()?a.switchOff():a.switchOn()});
a.panel.off().on("click",".option .values button",function(){var b=jQuery(this).closest(".option").attr("data-option"),c=jQuery(this).attr("value");1<=a.setOption(b,c)&&a.saveSettings()})})},injectPanelCss:function(){var a=document.createElement("link");a.setAttribute("rel","stylesheet");a.setAttribute("type","text/css");a.setAttribute("href","/scripts/wep/style.css");a.setAttribute("id","_we_panel_css");document.getElementsByTagName("head")[0].appendChild(a)},loadCssTemplate:function(a){if("string"!==
typeof a)return!1;var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("id","_we_css_template");b.setAttribute("href","/scripts/wep/templates/"+a+".css");document.getElementsByTagName("head")[0].appendChild(b);console.log('WEP: loaded CSS template "'+a+'"')},showPanel:function(){this.isEnabled()&&(this.panel.addClass("_visible"),this.isPanelVisible=!0,this.saveSettings(),this.showPanelToggle.find("i").removeClass("icon-eye").addClass("icon-chevron-up"))},
hidePanel:function(){this.isEnabled()&&(this.panel.removeClass("_visible"),this.isPanelVisible=!1,this.saveSettings(),this.showPanelToggle.find("i").removeClass("icon-chevron-up").addClass("icon-eye"))},switchOn:function(){this.isOn=!0;this.hookTag.addClass("_we");this.saveSettings();this.panel.addClass("_enabled");0!=this.isPanelVisible&&this.showPanel();this.panel.show();this.toggle.addClass("_active");jQuery("#palette").length&&(jQuery("#palette").hide(),jQuery("html").removeClass("palette_mode"),
console.info("WEP: palette mode disabled"))},switchOff:function(){this.hookTag.removeClass("_we");this.isOn=!1;this.saveSettings();this.panel.hide();this.toggle.removeClass("_active");jQuery("#palette").length&&(jQuery("#palette").show(),jQuery("html").addClass("palette_mode"),console.info("WEP: palette mode restored"))},isEnabled:function(){var a=!1;if(this.hookTag.hasClass("_we")||1==this.isOn)a=!0;return a},setOption:function(a,b){var c=this.settings,d=0;if(c.hasOwnProperty(a)){d=a+"_";var e=this.hookTag.attr("class");
e&&this.hookTag.attr("class",jQuery.trim(e.replace(new RegExp(d+".+?\\b","g"),"").replace(/\s\s+/g," ")));b&&"initial"!=b&&this.hookTag.addClass(d+b);c[a]=b;d=1;this.panel.find('.option[data-option="'+a+'"]').find("button").removeClass("active_option").filter('[value="'+b+'"]').addClass("active_option")}return d},applySettings:function(){var a=this.settings,b;for(b in a)a.hasOwnProperty(b)&&this.setOption(b,a[b]);1==this.isOn&&this.switchOn()},saveSettings:function(){var a=JSON.stringify(this.settings);
setCookie("WEP",this.isOn,{path:"/",expires:31536E3});setCookie("WEP_visible",this.isPanelVisible,{path:"/",expires:31536E3});setCookie("WEP_settings",a,{path:"/",expires:31536E3})},loadSettings:function(){var a=this.settings,b=getCookie("WEP_settings");if(b){b=JSON.parse(b);for(var c in b)a.hasOwnProperty(c)&&(a[c]=b[c])}"true"==getCookie("WEP")&&(this.isOn=!0);"false"==getCookie("WEP_visible")&&(this.isPanelVisible=!1)}};WEP.start();
function createOptionItemHtml(a,b){var c=b.values;a='<div class="option" data-option="'+a+'">';b.label&&(a+='<div class="label">'+b.label+"</div>");a+='<div class="values">';for(var d in c)a+='<button type="button" value="'+d+'"><i></i><span>'+c[d]+"</span></button>";return a+"</div></div>"}
function getUserLang(){var a=window.navigator.languages?window.navigator.languages[0]:null;a=a||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage;-1!==a.indexOf("-")&&(a=a.split("-")[0]);-1!==a.indexOf("_")&&(a=a.split("_")[0]);console.log(a);return a}
function getSelectedWords(){var a;if(window.getSelection&&(a=window.getSelection()).modify){if(a=window.getSelection(),!a.isCollapsed){var b=document.createRange();b.setStart(a.anchorNode,a.anchorOffset);b.setEnd(a.focusNode,a.focusOffset);var c=b.collapsed;b.detach();b=a.focusNode;var d=a.focusOffset;a.collapse(a.anchorNode,a.anchorOffset);c=c?["backward","forward"]:["forward","backward"];a.modify("move",c[0],"character");a.modify("move",c[1],"word");a.extend(b,d);a.modify("extend",c[1],"character");
a.modify("extend",c[0],"word")}}else if((a=document.selection)&&"Control"!=a.type&&(a=a.createRange(),a.text)){for(a.expand("word");/\s$/.test(a.text);)a.moveEnd("character",-1);a.select()}}function getSelectedText(){getSelectedWords();var a="";window.getSelection?(a=window.getSelection(),a.modify("extend","left","word"),a.modify("extend","right","word"),a=a.toString()):document.selection&&"Control"!=document.selection.type&&(a=document.selection.createRange().text);return a}
function getCookie(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):void 0}function setCookie(a,b,c){c=c||{};var d=c.expires;if("number"==typeof d&&d){var e=new Date;e.setTime(e.getTime()+1E3*d);d=c.expires=e}d&&d.toUTCString&&(c.expires=d.toUTCString());b=encodeURIComponent(b);a=a+"="+b;for(var f in c)a+="; "+f,b=c[f],!0!==b&&(a+="="+b);document.cookie=a}
function deleteCookie(a){setCookie(a,"",{expires:-1})};
